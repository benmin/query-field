!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";for(var d=[{title:"As The Deer",labels:["sacred","relaxing"],author:"Fake"},{title:"Change My Heart, O God",labels:["sacred"],author:"Fake"},{title:"Give Thanks",labels:["sacred"],author:"Fake"},{title:"In Moments Like These",labels:["sacred"],author:"Fake"},{title:"Make Me a Servant",labels:["sacred"],author:"Another author"},{title:"Morning Has Broken",labels:["sacred"],author:"Another author"},{title:"O Perfect Love",labels:["sacred","love","wedding"],author:"Another author"},{title:"Simple Gifts",labels:["sacred"],author:"Another author"},{title:"What a Friend We Have in Jesus",labels:["sacred","upbeat"],author:"Another author"},{title:"Wondrous Love/ Wondrous Cross",labels:["sacred","relaxing"],author:"Ben"},{title:"Angelus",labels:["classical","relaxing"],author:"Ben"},{title:"Ballade",labels:["classical","relaxing"],author:"Ben"},{title:"Dreams of Spring",labels:["relaxing"],author:"Ben"},{title:"Fountain in the Rain",labels:["relaxing"],author:"Ben"},{title:"Gavotte",labels:["classical","relaxing"],author:"Ben"},{title:"Interlude",labels:["classical","relaxing"],author:"Ben"}],e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40},f=React.createClass({displayName:"QueryOption",getInitialState:function(){return{active:!1}},render:function(){return React.createElement("li",{className:this.state.active?"active":""},React.createElement("a",{href:"#",tabIndex:"-1",onClick:this.props.clickHandler},React.createElement("span",{className:"qf-option-type"},this.props.label,":"),React.createElement("span",{className:"qf-option-value"},this.props.value)))}}),g=React.createClass({displayName:"QueryMenu",items:[],getInitialState:function(){return{activeIndex:0}},componentDidUpdate:function(){this.items.length>0&&this.props.options.length>this.state.activeIndex&&this.state.activeIndex>=0&&this.items[this.state.activeIndex].setState({active:!0})},updateActive:function(a){this.state.activeIndex!==a&&(this.items[this.state.activeIndex].setState({active:!1}),this.items[a].setState({active:!0}),this.setState({activeIndex:a}))},selectUp:function(){var a=this.state.activeIndex-1;a<0&&(a=0),this.updateActive(a)},selectDown:function(){var a=this.state.activeIndex+1;a>this.props.options.length-1&&(a=this.props.options.length-1),this.updateActive(a)},render:function(){return React.createElement("div",{className:"dropdown-menu"},this.props.options.map(function(a,b){var c=this;return React.createElement(f,{key:b,label:a.label,value:a.value,clickHandler:this.props.clickHandler.bind(null,b),ref:function(a){c.items[b]=a}})},this))}}),h=React.createClass({displayName:"QueryParameter",getInitialState:function(){return{highlighted:!1}},removeParameterOnBackspace:function(a){a.keyCode===e.BACKSPACE&&(a.preventDefault(),this.props.removeParameter())},render:function(){return React.createElement("span",{className:"qf-parameter btn btn-default btn-xs"+(this.state.highlighted?" qf-parameter-highlighted":""),tabIndex:"0",onKeyDown:this.removeParameterOnBackspace},React.createElement("span",{className:"close",onClick:this.props.removeParameter},"Â x"),React.createElement("span",{className:"qf-option-type"},this.props.label,": "),React.createElement("span",{className:"qf-option-value"},this.props.value))}}),i=React.createClass({displayName:"QueryField",getInitialState:function(){return{inputValue:"",options:this.props.options,filteredOptions:[],parameters:[],freeFormIndexes:[],menuVisible:!1}},addParameter:function(a){var b=this.state.parameters;b.push(a),this.setState({parameters:b}),this.filterItems()},removeParameter:function(a){var b=this.state.parameters;console.log("params len = ",b.length),b.splice(a,1),console.log("params len again = ",b.length),this.setState({parameters:b}),this.filterItems()},filterItems:function(){console.log("params = ",this.state.parameters);var a,b,c,d,e,f=this.props.items,g=this.state.parameters,h=[];for(console.log("songs list = ",this.props.items),0===g.length&&this.props.filterItems(f),a=0;a<f.length;a++){for(d=f[a],e=!0,b=0;b<g.length;b++)switch(c=g[b],void 0===c.type&&(c.type="string"),c.type){case"array":switch(c.comparison){case"equals":d[c.field].indexOf(c.value.toLowerCase())<0&&(e=!1);break;default:throw new Error('"'+c.comparison+'" is not support for type "'+c.type+'".')}break;case"string":switch(c.comparison){case"equals":d[c.field]!==c.value&&(e=!1);break;case"contains":void 0!==d[c.field]&&null!==d[c.field]&&d[c.field].toLowerCase().includes(c.value.toLowerCase())||(e=!1);break;default:throw new Error('"'+c.comparison+'" is not support for type "'+c.type+'".')}break;default:throw new Error('Type "'+c.type+'" is not supported.')}e&&h.push(d)}console.log("filtered songs = ",h),this.props.filterItems(h)},filterOptions:function(a,b){var c,d,e=[],f=a.toLowerCase();for(d=0;d<b.length;d++)c=b[d],this.isOptionSelected(c,this.state.parameters)||(c.freeform?(c.value=a,e.push(c)):c.value.toLowerCase().indexOf(f)>-1&&e.push(c));return e},isOptionSelected:function(a){var b,c;for(c=0;c<this.state.parameters.length;c++)if(b=this.state.parameters[c],"array"===a.type){if(b.label===a.label&&b.value===a.value)return!0}else if(b.label===a.label)return!0;return!1},onInputChange:function(a){var b=a.target.value;this.inputChange(b)},inputChange:function(a){var b=!!a,c=[];b&&(c=this.filterOptions(a,this.state.options)),0===c.length?this.refs.menu.setState({activeIndex:0}):this.refs.menu.state.activeIndex>=c.length&&(console.log("index out of bounds"),this.refs.menu.setState({activeIndex:c.length-1})),this.setState({inputValue:a,menuVisible:b,filteredOptions:c})},onKeyDown:function(a){if(a.keyCode!==e.BACKSPACE||this.state.inputValue)a.keyCode===e.UP_ARROW&&this.state.menuVisible?(a.preventDefault(),this.refs.menu.selectUp()):a.keyCode===e.DOWN_ARROW&&this.state.menuVisible?(a.preventDefault(),this.refs.menu.selectDown()):a.keyCode===e.ENTER&&this.state.menuVisible&&(a.preventDefault(),this.onSelectFilterOption(this.refs.menu.state.activeIndex));else{console.log("backspace");var b=this.state.parameters.length;b>0&&(this.state.selectedIndex=b-1),console.log(this.refs)}},onSelectFilterOption:function(a){var b=this.state.filteredOptions[a];this.addParameter(b),this.inputChange("")},paramDivs:[],render:function(){return React.createElement("div",{className:"form-control qf-form-control"},this.state.parameters.map(function(a,b){var c=this;return React.createElement(h,{key:b,label:a.label,value:a.value,removeParameter:this.removeParameter.bind(this,b),ref:function(a){c.paramDivs[b]=a,console.log(c,a,c.paramDivs,"IDENT")}})},this),React.createElement("div",{className:"dropdown"+(this.state.menuVisible?" open":"")},React.createElement("input",{type:"text",placeholder:"Enter search term...",tabIndex:"0",className:"qf-input",id:"qf-input1",value:this.state.inputValue,onChange:this.onInputChange,onKeyDown:this.onKeyDown}),React.createElement(g,{options:this.state.filteredOptions,clickHandler:this.onSelectFilterOption,ref:"menu"})))}}),j=["Classical","Relaxing","Sacred","Love","Wedding"],k=[{label:"Title",field:"title",value:"",comparison:"contains",freeform:!0},{label:"Author",field:"author",value:"",comparison:"contains",freeform:!0}],l=0;l<j.length;l++)k.push({label:"Label",field:"labels",type:"array",value:j[l],comparison:"equals"});var m=React.createClass({displayName:"ExampleList",getInitialState:function(){return{songs:d}},filterSongs:function(a){console.log("filtered songs",a),this.setState({songs:a})},render:function(){return React.createElement("div",null,React.createElement(i,{options:k,items:d,filterItems:this.filterSongs}),this.state.songs.map(function(a,b){return React.createElement("div",{key:b},React.createElement("div",null,a.title),React.createElement("div",null,a.author),React.createElement("div",null,a.labels.map(function(a,b){return React.createElement("span",{key:b},a)})))}))}});ReactDOM.render(React.createElement("div",null,React.createElement(m,null)),document.getElementById("query-field"))},{}]},{},[1]);